#Data Modeling with Postgres

#Summary:

In this project, we apply Data Modeling with Postgres and build an ETL pipeline using Python. A startup "Sparkify" wants to analyze the data they've been collecting on songs and user activity on their new music streaming app. they are collecting data in json format and needto analysis on  what songs users are listening to.

#Song Dataset:

Songs dataset is a subset of Million Song Dataset.
filepaths to two files in this dataset:

song_data/A/B/C/TRABCEI128F424C983.json
song_data/A/A/B/TRAABJL12903CDCF1A.json

Sample Record :

{"num_songs": 1, "artist_id": "ARJIE2Y1187B994AB7", "artist_latitude": null, "artist_longitude": null, "artist_location": "", "artist_name": "Line Renaud", "song_id": "SOUPIRU12A6D4FA1E1", "title": "Der Kleine Dompfaff", "duration": 152.92036, "year": 0}

#Log Dataset:

Logs dataset is generated by Event Simulator.
filepaths to two files in this dataset:

log_data/2018/11/2018-11-12-events.json
log_data/2018/11/2018-11-13-events.json


#Fact Table:

songplays: records in log data associated with song plays 
songplay_id, start_time, user_id, level, song_id, artist_id, session_id, location, user_agent

#Dimension Tables:

users: users in the app
user_id, first_name, last_name, gender, level

songs: songs in music database
song_id, title, artist_id, year, duration

artists: artists in music database
artist_id, name, location, latitude, longitude

time: timestamps of records in songplays broken down into specific time units
start_time, hour, day, week, month, year, weekday

#Project Files:

sql_queries.py: contains sql queries for dropping, creating and inserting all the tables.

create_tables.py: contains code for setting up database. Running this file creates sparkifydb and also creates and drops the fact and dimension tables.

etl.ipynb: a jupyter notebook to analyse dataset before loading.

etl.py: read and process song_data and log_data

test.ipynb: a notebook to connect to postgres db and validate the data loaded.

#Environment:

Python 3.0

PostgresSQL

psycopg2 - PostgreSQL database adapter for Python


#How to run:

Run the drive program main.py as below:

python main.py

The create_tables.py and etl.py file can also be run independently as below:

python create_tables.py 
python etl.py 

